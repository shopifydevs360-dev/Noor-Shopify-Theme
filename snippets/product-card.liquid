{% if product %}
<div class="product-card">

  <!-- ================= IMAGE ================= -->
  <div class="image-wrap">
    <a href="{{ product.url }}" aria-label="{{ product.title }}">
      <div class="cropped-image-wrapper">

        {% if product.tags contains 'best seller' %}
          <div class="product-badges-wrapper">
            <span>best seller</span>
          </div>
        {% endif %}

        {% if product.featured_image %}
          <img
            src="{{ product.featured_image | img_url: '533x' }}"
            alt="{{ product.featured_image.alt | escape }}"
            class="product-card__image"
            loading="lazy">
        {% endif %}

        {% if product.images.size > 1 %}
          <img
            src="{{ product.images[1] | img_url: '533x' }}"
            alt="{{ product.images[1].alt | escape }}"
            class="hover-img"
            loading="lazy">
        {% endif %}

      </div>
    </a>

    <!-- ================= QUICK ADD ================= -->
    <div class="ajax-quick-add-wrapper">

      {% if product.variants.size > 1 %}
        <!-- MULTI VARIANT -->
        <div class="variants-outer-wrapper">
          <div class="variants-wrapper">

            {% for variant in product.variants %}
              <form
                method="post"
                action="/cart/add"
                class="product-form"
                data-product-id="{{ product.id }}"
              >
                <input type="hidden" name="id" value="{{ variant.id }}">

                <button
                  type="submit"
                  class="text-only variant-btn split-aligner js-quick-add-to-cart--full-width{% unless variant.available %} disabled{% endunless %}"
                  {% unless variant.available %}disabled{% endunless %}
                >
                  <span>{{ variant.title }}</span>
                  <span>{{ variant.price | money }}</span>
                </button>
              </form>
            {% endfor %}

          </div>

          <button type="button" class="text-only cta-btn">
            Make Selection
          </button>
        </div>

      {% else %}
        <!-- SINGLE VARIANT -->
        <form
          method="post"
          action="/cart/add"
          class="product-form"
          data-product-id="{{ product.id }}"
        >
          <input type="hidden" name="id" value="{{ product.variants.first.id }}">

          <button
            type="submit"
            class="cta-btn text-only js-quick-add-to-cart--full-width"
            {% unless product.available %}disabled{% endunless %}
          >
            {% if product.available %}
              Add to bag
            {% else %}
              Out of stock
            {% endif %}
          </button>
        </form>
      {% endif %}

    </div>
  </div>

  <!-- ================= PRODUCT INFO ================= -->
  <div class="product-info">
    <div class="split-aligner">
      <p class="title">
        <a href="{{ product.url }}">{{ product.title }}</a>
      </p>
      <p class="price">{{ product.price | money }}</p>
    </div>
  </div>

</div>
{% endif %}
