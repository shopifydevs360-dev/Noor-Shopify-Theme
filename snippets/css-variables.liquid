{% style %}
{%- comment -%}
  Load Shopify fonts (if not using custom)
{%- endcomment -%}
{% unless settings.use_custom_font_body %}
  {{ settings.type_base_font | font_face: font_display: 'swap' }}
  {{ settings.type_base_font | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}
  {{ settings.type_base_font | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}
{% endunless %}

{% unless settings.use_custom_font_heading %}
  {{ settings.type_header_font | font_face: font_display: 'swap' }}
  {{ settings.type_header_font | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}
  {{ settings.type_header_font | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}
{% endunless %}


{%- comment -%}
  Load custom fonts via @font-face if enabled
{%- endcomment -%}
{% if settings.use_custom_font_body and settings.custom_body_font != blank %}
  <style>
    {% assign body_fonts = settings.custom_body_font | split: '\n' %}
    {% for font_item in body_fonts %}
      {% assign font_url = font_item | split: '@' | first %}
      {% assign font_weight = font_item | split: '@' | last | default: settings.custom_body_weight %}
      @font-face {
        font-family: 'CustomBodyFont';
        src: url('{{ font_url | strip }}') format('woff2');
        font-weight: {{ font_weight }};
        font-style: normal;
        font-display: swap;
      }
    {% endfor %}
  </style>
{% endif %}

{% if settings.use_custom_font_heading and settings.custom_heading_font != blank %}
  <style>
    {% assign heading_fonts = settings.custom_heading_font | split: '\n' %}
    {% for font_item in heading_fonts %}
      {% assign font_url = font_item | split: '@' | first %}
      {% assign font_weight = font_item | split: '@' | last | default: settings.custom_heading_weight %}
      @font-face {
        font-family: 'CustomHeadingFont';
        src: url('{{ font_url | strip }}') format('woff2');
        font-weight: {{ font_weight }};
        font-style: normal;
        font-display: swap;
      }
    {% endfor %}
  </style>
{% endif %}


{%- comment -%}
  Root variables
{%- endcomment -%}
:root {
  /* Body text font */
  {% if settings.use_custom_font_body %}
    --font-body-family: 'CustomBodyFont', sans-serif;
    --font-body-weight: {{ settings.custom_body_weight }};
  {% else %}
    --font-body-family: {{ settings.type_base_font.family }}, {{ settings.type_base_font.fallback_families }};
    --font-body-weight: {{ settings.type_base_font.weight }};
  {% endif %}
  --font-body-size: {{ settings.type_base_size }}px;
  --font-body-line-height: {{ settings.type_base_line_height }}px;

  /* Headings font */
  {% if settings.use_custom_font_heading %}
    --font-heading-family: 'CustomHeadingFont', sans-serif;
    --font-heading-weight: {{ settings.custom_heading_weight }};
  {% else %}
    --font-heading-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
    --font-heading-weight: {{ settings.type_header_font.weight }};
  {% endif %}
  --font-heading-spacing: {{ settings.type_header_spacing }}px;
  --font-h1-size: {{ settings.h1_font_size }}px;
  --font-h2-size: {{ settings.h2_font_size }}px;
  --font-h3-size: {{ settings.type_header_base_size }}px;
  --font-h4-size: {{ settings.h4_font_size }}px;
  --font-h5-size: {{ settings.h5_font_size }}px;
  --font-h6-size: {{ settings.h6_font_size }}px;

  /* Other existing root variables */
  --page-width: {{ settings.max_page_width }};
  --page-margin: {{ settings.min_page_margin }}px;
  --style-border-radius-inputs: {{ settings.input_corner_radius }}px;
}




{% for scheme in settings.color_schemes -%}
  {% assign scheme_classes = scheme_classes | append: '.m-color-' | append: scheme.id | append: ', ' %}
  {%- if forloop.index == 1 -%}
    :root,
  {%- endif -%}
  .m-color-{{ scheme.id }} {
    /* Background */
    --color-background: {{ scheme.settings.background.red }}, {{ scheme.settings.background.green }}, {{ scheme.settings.background.blue }};
    --color-background-secondary: {{ scheme.settings.background_secondary.red }}, {{ scheme.settings.background_secondary.green }}, {{ scheme.settings.background_secondary.blue }};
    {% if scheme.settings.background_gradient != empty %}
      --gradient-background: {{ scheme.settings.background_gradient }};
    {% else %}
      --gradient-background: {{ scheme.settings.background }};
    {% endif %}

    /* Text */
    --color-foreground: {{ scheme.settings.text.red }}, {{ scheme.settings.text.green }}, {{ scheme.settings.text.blue }};
    --color-foreground-secondary: {{ scheme.settings.subtext.red }}, {{ scheme.settings.subtext.green }}, {{ scheme.settings.subtext.blue }};
    --color-heading: {{ scheme.settings.heading_text.red }}, {{ scheme.settings.heading_text.green }}, {{ scheme.settings.heading_text.blue }};

    /* Buttons */
    --color-primary-button: {{ scheme.settings.primary_button.red }}, {{ scheme.settings.primary_button.green }}, {{ scheme.settings.primary_button.blue }};
    --color-primary-button-label: {{ scheme.settings.primary_button_label.red }}, {{ scheme.settings.primary_button_label.green }}, {{ scheme.settings.primary_button_label.blue }};
    --color-primary-button-outline: {{ scheme.settings.primary_button_outline.red }}, {{ scheme.settings.primary_button_outline.green }}, {{ scheme.settings.primary_button_outline.blue }};

    --color-secondary-button: {{ scheme.settings.secondary_button.red }}, {{ scheme.settings.secondary_button.green }}, {{ scheme.settings.secondary_button.blue }};
    --color-secondary-button-label: {{ scheme.settings.secondary_button_label.red }}, {{ scheme.settings.secondary_button_label.green }}, {{ scheme.settings.secondary_button_label.blue }};
    --color-secondary-button-outline: {{ scheme.settings.secondary_button_outline.red }}, {{ scheme.settings.secondary_button_outline.green }}, {{ scheme.settings.secondary_button_outline.blue }};

    /* Hover states */
    --color-primary-hover: {{ scheme.settings.primary_hover.red }}, {{ scheme.settings.primary_hover.green }}, {{ scheme.settings.primary_hover.blue }};
    --color-primary-hover-label: {{ scheme.settings.primary_hover_label.red }}, {{ scheme.settings.primary_hover_label.green }}, {{ scheme.settings.primary_hover_label.blue }};
    --color-primary-hover-outline: {{ scheme.settings.primary_hover_outline.red }}, {{ scheme.settings.primary_hover_outline.green }}, {{ scheme.settings.primary_hover_outline.blue }};

    --color-secondary-hover: {{ scheme.settings.secondary_hover.red }}, {{ scheme.settings.secondary_hover.green }}, {{ scheme.settings.secondary_hover.blue }};
    --color-secondary-hover-label: {{ scheme.settings.secondary_hover_label.red }}, {{ scheme.settings.secondary_hover_label.green }}, {{ scheme.settings.secondary_hover_label.blue }};
    --color-secondary-hover-outline: {{ scheme.settings.secondary_hover_outline.red }}, {{ scheme.settings.secondary_hover_outline.green }}, {{ scheme.settings.secondary_hover_outline.blue }};

    /* Price */
    --color-price-sale: {{ scheme.settings.price_sale.red }}, {{ scheme.settings.price_sale.green }}, {{ scheme.settings.price_sale.blue }};
    --color-price-regular: {{ scheme.settings.price_regular.red }}, {{ scheme.settings.price_regular.green }}, {{ scheme.settings.price_regular.blue }};

    /* Form fields */
    --color-form-field: {{ scheme.settings.form_field.red }}, {{ scheme.settings.form_field.green }}, {{ scheme.settings.form_field.blue }};
    --color-form-field-text: {{ scheme.settings.form_field_label.red }}, {{ scheme.settings.form_field_label.green }}, {{ scheme.settings.form_field_label.blue }};

    /* Tooltip */
    --color-tooltip: {{ scheme.settings.tooltip.red }}, {{ scheme.settings.tooltip.green }}, {{ scheme.settings.tooltip.blue }};
    --color-tooltip-text: {{ scheme.settings.tooltip_label.red }}, {{ scheme.settings.tooltip_label.green }}, {{ scheme.settings.tooltip_label.blue }};

    /* Misc */
    --color-border: {{ scheme.settings.border.red }}, {{ scheme.settings.border.green }}, {{ scheme.settings.border.blue }};
  }
{% endfor %}

{% endstyle %}
