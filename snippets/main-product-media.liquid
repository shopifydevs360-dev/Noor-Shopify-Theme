    <div class="product-media">

      {% assign featured_media = product.featured_media %}
      {% assign media_count = product.media.size %}

      <!-- MAIN IMAGE / VIDEO -->
      <div class="product-media__main">
        {% if featured_media.media_type == 'video' %}
          {{ featured_media | video_tag: controls: true, autoplay: false }}
        {% else %}
          <img
            src="{{ featured_media | image_url: width: 1200 }}"
            alt="{{ featured_media.alt | escape }}"
            class="js-zoom-image"
            loading="eager">
        {% endif %}
      </div>

      <!-- SECOND ROW: VIDEO (IF EXISTS) -->
      {% assign has_video = false %}
      {% for media in product.media %}
        {% if media.media_type == 'video' %}
          {% assign has_video = true %}
        {% endif %}
      {% endfor %}

      {% if has_video %}
        <div class="product-media__video-row">
          {% for media in product.media %}
            {% if media.media_type == 'video' %}
              {{ media | video_tag: controls: true }}
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      <!-- THIRD ROW: IMAGE SLIDER -->
      {% if media_count > 1 %}
        <div class="product-media__thumbs swiper">
          <div class="swiper-wrapper">

            {% for media in product.media %}
              {% if media.media_type == 'image' %}
                <div class="swiper-slide">
                  <img
                    src="{{ media | image_url: width: 400 }}"
                    alt="{{ media.alt | escape }}"
                    data-full="{{ media | image_url: width: 1200 }}"
                    class="js-thumb">
                </div>
              {% endif %}
            {% endfor %}

          </div>
        </div>
      {% endif %}

    </div>