
<!-- Menu Drawer -->
<div class="drawer drawer--menu m-color-{{ section.settings.color_scheme }}" id="menu-drawer" role="dialog" aria-modal="true" aria-label="Menu">
  <div class="drawer__inner">
    <div class="drawer__main">
      <div class="drawer__header">
        <button class="drawer__close" aria-label="Close" data-drawer-close>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="drawer__content">
        <nav class="drawer__menu">
          <ul class="menu__list menu__list--level-1">
            {% for link in section.settings.menu.links %}
              <li class="menu__item {% if link.links != blank %}menu__item--has-children{% endif %}">
                <a href="{{ link.url }}" class="menu__link {% if link.active %}menu__link--active{% endif %}">
                  {{ link.title }}
                  {% if link.links != blank %}
                    <span class="menu__arrow">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </span>
                  {% endif %}
                </a>
                
                {% if link.links != blank %}
                  <div class="menu__submenu">
                    <ul class="menu__list menu__list--level-2">
                      {% for childlink in link.links %}
                        <li class="menu__item">
                          <a href="{{ childlink.url }}" class="menu__link {% if childlink.active %}menu__link--active{% endif %}">
                            {{ childlink.title }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>


<script>
    // header.js
document.addEventListener('DOMContentLoaded', function() {
  // Drawer functionality
  const drawerToggles = document.querySelectorAll('[data-drawer-toggle]');
  const drawerCloses = document.querySelectorAll('[data-drawer-close]');
  
  drawerToggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      const drawerId = this.getAttribute('data-drawer-toggle');
      const drawer = document.getElementById(drawerId);
      
      if (drawer) {
        drawer.classList.add('open');
        document.body.style.overflow = 'hidden';
        
        // Add expanded class to menu drawer main when hovering over items with children
        if (drawerId === 'menu-drawer') {
          const menuItemsWithChildren = drawer.querySelectorAll('.menu__item--has-children');
          const drawerMain = drawer.querySelector('.drawer__main');
          
          menuItemsWithChildren.forEach(item => {
            item.addEventListener('mouseenter', function() {
              drawerMain.classList.add('expanded');
            });
            
            item.addEventListener('mouseleave', function() {
              drawerMain.classList.remove('expanded');
            });
          });
        }
      }
    });
  });
  
  drawerCloses.forEach(close => {
    close.addEventListener('click', function() {
      const drawer = this.closest('.drawer');
      
      if (drawer) {
        drawer.classList.remove('open');
        document.body.style.overflow = '';
      }
    });
  });
  
  // Close drawer when clicking outside
  document.addEventListener('click', function(event) {
    const openDrawer = document.querySelector('.drawer.open');
    
    if (openDrawer && !openDrawer.contains(event.target) && !event.target.closest('[data-drawer-toggle]')) {
      openDrawer.classList.remove('open');
      document.body.style.overflow = '';
    }
  });
  
  // Handle ESC key to close drawer
  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      const openDrawer = document.querySelector('.drawer.open');
      
      if (openDrawer) {
        openDrawer.classList.remove('open');
        document.body.style.overflow = '';
      }
    }
  });
});
</script>