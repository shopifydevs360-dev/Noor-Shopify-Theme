{{ 'menu-drawer.css' | asset_url | stylesheet_tag: preload: true }}
<!-- Menu Drawer -->
<div class="drawer drawer--menu m-color-{{ section.settings.color_scheme }}" id="menu-drawer" role="dialog" aria-modal="true" aria-label="Menu">
  <!-- Overlay -->
  <div class="drawer__overlay"></div>
  
  <div class="drawer__inner">
    <!-- Panel 1: Parent Menu -->
    <div class="drawer__panel drawer__panel--level-1" data-panel="1">
      <div class="drawer__header">
        <button class="drawer__close" aria-label="Close" data-drawer-close>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="drawer__content">
        <nav class="drawer__menu">
          <ul class="menu__list menu__list--level-1">
            {% for link in section.settings.menu.links %}
              <li class="menu__item {% if link.links != blank %}menu__item--has-children{% endif %}" data-level="1">
                <a href="{{ link.url }}" class="menu__link {% if link.active %}menu__link--active{% endif %}" 
                   {% if link.links != blank %}data-panel-toggle="2" data-parent-title="{{ link.title }}"{% endif %}>
                  {{ link.title }}
                  {% if link.links != blank %}
                    <span class="menu__arrow">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </span>
                  {% endif %}
                </a>
                
                {% if link.links != blank %}
                  <div class="menu__submenu" data-submenu="2">
                    <ul class="menu__list menu__list--level-2">
                      {% for childlink in link.links %}
                        <li class="menu__item {% if childlink.links != blank %}menu__item--has-children{% endif %}" data-level="2">
                          <a href="{{ childlink.url }}" class="menu__link {% if childlink.active %}menu__link--active{% endif %}"
                             {% if childlink.links != blank %}data-panel-toggle="3" data-parent-title="{{ childlink.title }}"{% endif %}>
                            {{ childlink.title }}
                            {% if childlink.links != blank %}
                              <span class="menu__arrow">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                              </span>
                            {% endif %}
                          </a>
                          
                          {% if childlink.links != blank %}
                            <div class="menu__submenu" data-submenu="3">
                              <ul class="menu__list menu__list--level-3">
                                {% for grandchildlink in childlink.links %}
                                  <li class="menu__item {% if grandchildlink.type == 'collection' %}menu__item--is-collection{% endif %}" data-level="3">
                                    <a href="{{ grandchildlink.url }}" class="menu__link {% if grandchildlink.active %}menu__link--active{% endif %}"
                                       {% if grandchildlink.type == 'collection' %}data-panel-toggle="4" data-parent-title="{{ grandchildlink.title }}"{% endif %}>
                                      {{ grandchildlink.title }}
                                      {% if grandchildlink.type == 'collection' %}
                                        <span class="menu__arrow">
                                          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                          </svg>
                                        </span>
                                      {% endif %}
                                    </a>
                                  </li>
                                {% endfor %}
                              </ul>
                            </div>
                          {% endif %}
                        </li>
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </nav>
      </div>
    </div>
    
    <!-- Panel 2: Child Menu (dynamically populated) -->
    <div class="drawer__panel drawer__panel--level-2" data-panel="2">
      <div class="drawer__header">
        <button class="drawer__back" aria-label="Back" data-panel-back="1">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <h3 class="drawer__panel-title"></h3>
        <button class="drawer__close" aria-label="Close" data-drawer-close>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="drawer__content">
        <nav class="drawer__menu">
          <ul class="menu__list menu__list--level-2"></ul>
        </nav>
      </div>
    </div>
    
    <!-- Panel 3: Grandchild Menu (dynamically populated) -->
    <div class="drawer__panel drawer__panel--level-3" data-panel="3">
      <div class="drawer__header">
        <button class="drawer__back" aria-label="Back" data-panel-back="2">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <h3 class="drawer__panel-title"></h3>
        <button class="drawer__close" aria-label="Close" data-drawer-close>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="drawer__content">
        <nav class="drawer__menu">
          <ul class="menu__list menu__list--level-3"></ul>
        </nav>
      </div>
    </div>
    
    <!-- Panel 4: Collection Details (conditionally shown) -->
    <div class="drawer__panel drawer__panel--level-4" data-panel="4">
      <div class="drawer__header">
        <button class="drawer__back" aria-label="Back" data-panel-back="3">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <h3 class="drawer__panel-title"></h3>
        <button class="drawer__close" aria-label="Close" data-drawer-close>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="drawer__content">
        <div class="collection-details">
          <!-- Collection details will be dynamically populated -->
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ 'menu-drawer.js' | asset_url }}" defer="defer"></script>