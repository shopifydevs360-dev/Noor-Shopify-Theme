{{ 'menu-drawer.css' | asset_url | stylesheet_tag: preload: true }}

<!-- Menu Drawer Overlay -->
<div class="drawer__overlay" id="drawer-overlay"></div>

<!-- Menu Drawer -->
<div class="drawer drawer--menu m-color-{{ section.settings.color_scheme }}" id="menu-drawer" role="dialog" aria-modal="true" aria-label="Menu">
  <div class="drawer__inner">
    <div class="drawer__main">
      <div class="drawer__header">
        <button class="drawer__close" aria-label="Close" data-drawer-close>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="drawer__panels">
        <!-- Level 1 Panel - Parent Items -->
        <div class="drawer__panel drawer__panel--level-1 active" data-panel="1">
          <div class="panel__header">
            <h2 class="panel__title">Menu</h2>
          </div>
          <div class="panel__content">
            <nav class="drawer__menu">
              <ul class="menu__list menu__list--level-1">
                {% for link in section.settings.menu.links %}
                  <li class="menu__item {% if link.links != blank %}menu__item--has-children{% endif %}">
                    <a href="{{ link.url }}" class="menu__link {% if link.active %}menu__link--active{% endif %}" 
                      {% if link.links != blank %}data-panel-toggle="2" data-panel-title="{{ link.title }}"{% endif %}>
                      {{ link.title }}
                      {% if link.links != blank %}
                        <span class="menu__arrow">
                          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </span>
                      {% endif %}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </nav>
          </div>
        </div>
        
        <!-- Level 2 Panel - Child Items -->
        <div class="drawer__panel drawer__panel--level-2" data-panel="2">
          <div class="panel__header">
            <button class="panel__back" data-panel-toggle="1">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Back
            </button>
            <h2 class="panel__title" id="panel-2-title"></h2>
          </div>
          <div class="panel__content">
            <nav class="drawer__menu">
              <ul class="menu__list menu__list--level-2" id="menu-level-2">
                <!-- Child items will be populated dynamically -->
              </ul>
            </nav>
          </div>
        </div>
        
        <!-- Level 3 Panel - Grandchild Items -->
        <div class="drawer__panel drawer__panel--level-3" data-panel="3">
          <div class="panel__header">
            <button class="panel__back" data-panel-toggle="2">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Back
            </button>
            <h2 class="panel__title" id="panel-3-title"></h2>
          </div>
          <div class="panel__content">
            <nav class="drawer__menu">
              <ul class="menu__list menu__list--level-3" id="menu-level-3">
                <!-- Grandchild items will be populated dynamically -->
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ 'menu-drawer.js' | asset_url }}" defer="defer"></script>