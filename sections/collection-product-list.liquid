{{ 'collection-product-list.css' | asset_url | stylesheet_tag }}

<div class="shopify-section m-color-{{ section.settings.color_scheme.id }}">
  <div class="container">
    <div class="collection-wrapper">
      <!-- Filters Sidebar -->
      {% render 'products-filter' %}

      <!-- Main Content -->
      <main class="main-content">
        <!-- Toolbar -->
        <div class="toolbar">
          <div class="results-count">
            Showing <strong>{{ collection.products_count }}</strong> products
          </div>
          <div class="toolbar-actions">
            <div class="view-toggle">
              <button class="view-btn active" onclick="setView('grid')" title="Grid View">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm10 0h8v8h-8z"/>
                </svg>
              </button>
              <button class="view-btn" onclick="setView('list')" title="List View">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                </svg>
              </button>
            </div>
            <select class="sort-dropdown" onchange="location = this.value;">
              <option value="{{ collection.url }}?sort_by={{ collection.sort_by | default: collection.default_sort_by }}" selected>
                Sort by
              </option>
              {% for option in collection.sort_options %}
                <option value="{{ collection.url }}?sort_by={{ option.value }}" {% if collection.sort_by == option.value %}selected{% endif %}>
                  {{ option.name }}
                </option>
              {% endfor %}
            </select>
          </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="productsContainer">
          {% for product in collection.products %}
            {% render 'product-card', product: product %}
          {% endfor %}
        </div>

        <!-- Pagination -->
        {% if paginate.pages > 1 %}
          <div class="pagination">
            {{ paginate | default_pagination }}
          </div>
        {% endif %}
      </main>
    </div>
  </div>
</div>

<!-- Mobile Filter Toggle -->
<button class="mobile-filter-toggle" onclick="toggleMobileFilters()">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
    <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
  </svg>
</button>
 <script src="{{ 'collection-filter.js' | asset_url }}" defer="defer"></script>
  <script src="{{ 'product-card.js' | asset_url }}" defer="defer"></script>
{% schema %}
{
  "name": "Collection product list",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "color_tags",
      "label": "Color Tags",
      "default": "Red,Blue,Green,Black,White,Yellow,Pink,Purple,Orange",
      "info": "Comma-separated list of color tags"
    },
    {
      "type": "range",
      "id": "products_per_page",
      "min": 12,
      "max": 48,
      "step": 12,
      "label": "Products per page",
      "default": 24
    }
  ]
}
{% endschema %}

