{{ 'featured-articles-slider.css' | asset_url | stylesheet_tag }}

{% assign blog_object = blogs[section.settings.blog] %}

{% if blog_object != blank and blog_object.articles.size > 0 %}

<div
  class="featured-articles-section"
  {{ section.shopify_attributes }}
>
  <div class="featured-articles-inner">

    {% if section.settings.title != blank %}
      <h2 class="featured-articles-heading">
        {{ section.settings.title }}
      </h2>
    {% endif %}

    <div class="swiper featuredArticlesSwiper">
      <div class="swiper-wrapper">

        {% for article in blog_object.articles limit: 5 %}
          <div class="swiper-slide">

            <div class="featured-article">

              <!-- IMAGE -->
              <div class="featured-article-image">
                {% if article.image %}
                  <img
                    src="{{ article.image | image_url: width: 1200 }}"
                    alt="{{ article.title | escape }}"
                    loading="lazy">
                {% endif %}
              </div>

              <!-- CONTENT -->
              <div class="featured-article-content">
                <h3>{{ article.title }}</h3>

                <a href="{{ article.url }}" class="featured-article-link">
                  Explore
                </a>
              </div>

              <!-- COUNTER -->
              <div class="featured-article-counter">
                {{ forloop.index | prepend: '0' }}
              </div>

            </div>

          </div>
        {% endfor %}

      </div>
    </div>

    <div class="featured-articles-footer">
      <a href="{{ blog_object.url }}">All Features</a>
    </div>

  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  new Swiper('.featuredArticlesSwiper', {
    direction: 'vertical',
    slidesPerView: 1,
    speed: 900,
    mousewheel: {
      forceToAxis: true,
      sensitivity: 1
    },
    allowTouchMove: false
  });
});
</script>

{% endif %}

{% schema %}
{
  "name": "Featured Articles Slider",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Featured Articles"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Select blog"
    }
  ],
  "presets": [
    {
      "name": "Featured Articles Slider"
    }
  ]
}
{% endschema %}
